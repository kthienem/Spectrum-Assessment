"use strict";

var data = [
  {
    "_id": "58b0743d618956e99f90ba48",
    "index": 0,
    "guid": "eebe48fd-f5d5-45fc-95d7-753bc01449e6",
    "isActive": false,
    "balance": "$1,133.01",
    "picture": "http://placehold.it/32x32",
    "age": 21,
    "eyeColor": "brown",
    "name": {
      "first": "Serena",
      "last": "Allison"
    },
    "company": "RETRACK",
    "email": "serena.allison@retrack.io",
    "phone": "+1 (914) 524-2157",
    "address": "264 Lincoln Place, Riverton, Kentucky, 9092",
    "about": "Labore exercitation ut deserunt mollit elit duis. Sint quis commodo adipisicing minim adipisicing exercitation sit adipisicing elit velit tempor. Sit sunt incididunt duis magna qui velit consectetur dolor eiusmod. Veniam laboris labore Lorem sunt eu ipsum eu reprehenderit anim consequat id mollit qui.",
    "registered": "Tuesday, April 26, 2016 10:48 PM",
    "latitude": "-87.268277",
    "longitude": "-51.793933",
    "tags": [
      "fugiat",
      "nostrud",
      "non",
      "esse",
      "eu"
    ],
    "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
    ],
    "friends": [
      {
        "id": 0,
        "name": "Rachelle Oneal"
      },
      {
        "id": 1,
        "name": "Verna Barton"
      },
      {
        "id": 2,
        "name": "Mills Alvarez"
      }
    ],
    "greeting": "Hello, Serena! You have 7 unread messages.",
    "favoriteFruit": "apple"
  },
  {
    "_id": "58b0743d324bbbbcc25ec58c",
    "index": 1,
    "guid": "9364ad44-cf99-4d27-9867-554641aa92d5",
    "isActive": true,
    "balance": "$2,918.72",
    "picture": "http://placehold.it/32x32",
    "age": 23,
    "eyeColor": "blue",
    "name": {
      "first": "Chrystal",
      "last": "Morton"
    },
    "company": "IZZBY",
    "email": "chrystal.morton@izzby.ca",
    "phone": "+1 (866) 517-3369",
    "address": "514 Ditmars Street, Riviera, Vermont, 8655",
    "about": "Incididunt elit consequat aliqua mollit dolore cupidatat esse enim do mollit qui. Mollit dolore enim culpa pariatur est excepteur pariatur fugiat proident ipsum anim eu nostrud cillum. Eiusmod enim incididunt ea et minim consequat nisi sunt voluptate.",
    "registered": "Wednesday, May 6, 2015 4:54 AM",
    "latitude": "-53.338508",
    "longitude": "129.441922",
    "tags": [
      "officia",
      "veniam",
      "enim",
      "officia",
      "nisi"
    ],
    "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
    ],
    "friends": [
      {
        "id": 0,
        "name": "Jennifer Casey"
      },
      {
        "id": 1,
        "name": "Dorsey Joyce"
      },
      {
        "id": 2,
        "name": "Benita Mercer"
      }
    ],
    "greeting": "Hello, Chrystal! You have 8 unread messages.",
    "favoriteFruit": "apple"
  },
  {
    "_id": "58b0743d314ff3cc2e37afd9",
    "index": 2,
    "guid": "2851b4c6-ef4c-4330-b3dc-ef405fc29313",
    "isActive": false,
    "balance": "$1,201.99",
    "picture": "http://placehold.it/32x32",
    "age": 26,
    "eyeColor": "brown",
    "name": {
      "first": "Justine",
      "last": "Roberson"
    },
    "company": "GREEKER",
    "email": "justine.roberson@greeker.info",
    "phone": "+1 (868) 504-2300",
    "address": "630 Poplar Avenue, Gorham, South Carolina, 5401",
    "about": "Enim ullamco deserunt adipisicing mollit deserunt duis fugiat qui in dolor. Duis ut eu nisi ut excepteur aliqua duis sunt eiusmod Lorem occaecat nulla. Irure ullamco commodo laboris aliquip dolor ullamco mollit aute. Cupidatat enim adipisicing esse id incididunt tempor. Voluptate elit excepteur in culpa anim aliqua laboris pariatur enim esse. Aliquip irure aute eiusmod eu incididunt excepteur amet.",
    "registered": "Friday, March 27, 2015 7:39 AM",
    "latitude": "-7.925961",
    "longitude": "152.451009",
    "tags": [
      "ipsum",
      "nisi",
      "dolor",
      "non",
      "quis"
    ],
    "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
    ],
    "friends": [
      {
        "id": 0,
        "name": "Melton Reid"
      },
      {
        "id": 1,
        "name": "Adele Wade"
      },
      {
        "id": 2,
        "name": "Ernestine Sanders"
      }
    ],
    "greeting": "Hello, Justine! You have 9 unread messages.",
    "favoriteFruit": "strawberry"
  },
  {
    "_id": "58b0743d94bdac5e59206622",
    "index": 3,
    "guid": "e1fd7c88-c6e6-4c14-9270-dfceab54acfb",
    "isActive": true,
    "balance": "$3,178.55",
    "picture": "http://placehold.it/32x32",
    "age": 34,
    "eyeColor": "green",
    "name": {
      "first": "Hancock",
      "last": "Gibson"
    },
    "company": "AQUACINE",
    "email": "hancock.gibson@aquacine.name",
    "phone": "+1 (949) 558-3580",
    "address": "374 Rugby Road, Lafferty, District Of Columbia, 8809",
    "about": "Dolor non ut velit ex minim tempor aliqua. Eiusmod ea proident aute elit non reprehenderit duis consectetur velit. Sunt consectetur cupidatat deserunt labore veniam nulla.",
    "registered": "Saturday, March 12, 2016 4:28 PM",
    "latitude": "-56.359567",
    "longitude": "-97.635339",
    "tags": [
      "nulla",
      "ex",
      "nisi",
      "Lorem",
      "cillum"
    ],
    "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
    ],
    "friends": [
      {
        "id": 0,
        "name": "Lara Hodges"
      },
      {
        "id": 1,
        "name": "Mason Morrow"
      },
      {
        "id": 2,
        "name": "Raquel Lawrence"
      }
    ],
    "greeting": "Hello, Hancock! You have 5 unread messages.",
    "favoriteFruit": "strawberry"
  },
  {
    "_id": "58b0743df9a2552d3c1ec2eb",
    "index": 4,
    "guid": "2aa9b55c-16c7-4d41-b66b-3016d1f27f9b",
    "isActive": false,
    "balance": "$1,151.72",
    "picture": "http://placehold.it/32x32",
    "age": 21,
    "eyeColor": "blue",
    "name": {
      "first": "Lott",
      "last": "Gomez"
    },
    "company": "SYNTAC",
    "email": "lott.gomez@syntac.biz",
    "phone": "+1 (928) 435-2740",
    "address": "575 Madison Street, Maybell, Georgia, 4330",
    "about": "Adipisicing mollit cupidatat voluptate Lorem qui exercitation nisi dolor. Fugiat fugiat et elit exercitation id aute ut ut aliquip voluptate esse occaecat in. Nostrud ut amet commodo minim duis nulla exercitation amet proident dolore occaecat quis.",
    "registered": "Wednesday, October 1, 2014 8:51 AM",
    "latitude": "82.694236",
    "longitude": "-37.878377",
    "tags": [
      "voluptate",
      "id",
      "id",
      "culpa",
      "nulla"
    ],
    "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
    ],
    "friends": [
      {
        "id": 0,
        "name": "Dickson Wilkinson"
      },
      {
        "id": 1,
        "name": "Cross Coleman"
      },
      {
        "id": 2,
        "name": "Jerri Sweet"
      }
    ],
    "greeting": "Hello, Lott! You have 5 unread messages.",
    "favoriteFruit": "apple"
  },
  {
    "_id": "58b0743d9c0c857464054350",
    "index": 5,
    "guid": "8fae6b13-86b0-4dca-82ba-7511de13e97b",
    "isActive": true,
    "balance": "$3,082.67",
    "picture": "http://placehold.it/32x32",
    "age": 30,
    "eyeColor": "green",
    "name": {
      "first": "Rosella",
      "last": "Houston"
    },
    "company": "FURNAFIX",
    "email": "rosella.houston@furnafix.co.uk",
    "phone": "+1 (932) 419-2447",
    "address": "436 Hart Street, Umapine, Northern Mariana Islands, 4453",
    "about": "Adipisicing consequat dolore ullamco excepteur do ipsum ad ut. Mollit nisi fugiat irure veniam incididunt duis aliquip dolor ea labore ullamco do ut amet. Ad in in enim occaecat enim reprehenderit consequat. Esse adipisicing cillum excepteur elit qui quis aliqua ullamco duis nostrud exercitation exercitation nisi.",
    "registered": "Monday, September 19, 2016 11:50 PM",
    "latitude": "82.760792",
    "longitude": "-86.068702",
    "tags": [
      "sit",
      "enim",
      "magna",
      "cupidatat",
      "culpa"
    ],
    "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
    ],
    "friends": [
      {
        "id": 0,
        "name": "June Mann"
      },
      {
        "id": 1,
        "name": "Cline Wall"
      },
      {
        "id": 2,
        "name": "Tyler Ratliff"
      }
    ],
    "greeting": "Hello, Rosella! You have 6 unread messages.",
    "favoriteFruit": "banana"
  },
  {
    "_id": "58b0743d580e7003989a77fa",
    "index": 6,
    "guid": "ee4b45e7-c9e1-42e9-8fbf-6b273f30140e",
    "isActive": true,
    "balance": "$1,345.86",
    "picture": "http://placehold.it/32x32",
    "age": 35,
    "eyeColor": "blue",
    "name": {
      "first": "Frances",
      "last": "Fischer"
    },
    "company": "PLASTO",
    "email": "frances.fischer@plasto.tv",
    "phone": "+1 (907) 547-3862",
    "address": "912 Lake Place, Malo, Alaska, 9509",
    "about": "Amet in proident fugiat velit excepteur non voluptate esse excepteur. Exercitation eu nostrud est velit cillum magna occaecat. Incididunt voluptate consectetur ut culpa reprehenderit dolor in culpa labore reprehenderit irure. Labore deserunt labore sint consequat ad labore deserunt dolor consequat laborum mollit reprehenderit consequat. Reprehenderit voluptate aliqua culpa commodo nisi sint.",
    "registered": "Friday, January 20, 2017 9:37 AM",
    "latitude": "34.416878",
    "longitude": "-24.071252",
    "tags": [
      "laborum",
      "velit",
      "quis",
      "reprehenderit",
      "esse"
    ],
    "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
    ],
    "friends": [
      {
        "id": 0,
        "name": "Bernadine Bray"
      },
      {
        "id": 1,
        "name": "Carroll Mayer"
      },
      {
        "id": 2,
        "name": "Jodie Garrison"
      }
    ],
    "greeting": "Hello, Frances! You have 6 unread messages.",
    "favoriteFruit": "strawberry"
  },
  {
    "_id": "58b0743d7922aaa514fcc2d7",
    "index": 7,
    "guid": "586eea15-7cbb-44ba-9b43-c8efa39df5a5",
    "isActive": true,
    "balance": "$3,468.22",
    "picture": "http://placehold.it/32x32",
    "age": 37,
    "eyeColor": "green",
    "name": {
      "first": "Mildred",
      "last": "Rush"
    },
    "company": "IMANT",
    "email": "mildred.rush@imant.org",
    "phone": "+1 (828) 403-2644",
    "address": "122 Vandervoort Avenue, Vienna, Rhode Island, 1681",
    "about": "Aute tempor in qui id reprehenderit eu adipisicing velit. Do est excepteur labore tempor veniam pariatur in consectetur. Laboris excepteur reprehenderit qui aliqua pariatur do commodo sunt laborum aliquip. Dolore consequat excepteur in qui consectetur deserunt. Ut ipsum exercitation et in quis sit ex commodo aliquip mollit culpa ut elit.",
    "registered": "Thursday, July 9, 2015 1:59 AM",
    "latitude": "-21.48272",
    "longitude": "62.669968",
    "tags": [
      "ex",
      "Lorem",
      "sunt",
      "nostrud",
      "anim"
    ],
    "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
    ],
    "friends": [
      {
        "id": 0,
        "name": "Mollie Cleveland"
      },
      {
        "id": 1,
        "name": "Baker Bradley"
      },
      {
        "id": 2,
        "name": "Nelson Holman"
      }
    ],
    "greeting": "Hello, Mildred! You have 6 unread messages.",
    "favoriteFruit": "strawberry"
  }
];

var rows = [];
var cells = [];
var numColumns = 6;
var titles = ["Name", "Image", "Age", "Phone Number", "Number of Friends", "Tags"];
var sortNames = null;
var sortAges = null;
var names = []

window.onload = function init() {
	for (var i = 0; i < data.length; i++) {
		names.push(data[i]["name"]["first"] + " " + data[i]["name"]["last"]);
	}

	$.typeahead({
		input: '.js-typeahead-name',
		order: "desc",
		source: {
			data: names
		},
	});

	createTable(data.length);
	setEntries();
}

function createTable(numRows)  {
	var table = document.getElementById("mTable");
	rows = [];
	cells = [];

	var tr = table.insertRow(0);
	for (var i = 0; i < numColumns; i++) {
		var td = tr.insertCell(-1);
		td.innerHTML = "<b>" + titles[i] + "</b>";
		if (titles[i] == "Name") {
			td.addEventListener("click", sortName);
		} else if (titles[i] == "Age") {
			td.addEventListener("click", sortAge);
		}
	}

	for (var i = 0; i < numRows; i++) {
		rows.push(table.insertRow(-1));
		cells.push([]);
		for (var j = 0; j < numColumns; j++) {
			cells[i].push(rows[i].insertCell(-1));
		}
	}
}

function setEntries() {

	for (var i = 0; i < data.length; i++) {
		cells[i][0].innerHTML = data[i]["name"]["first"] + " " + data[i]["name"]["last"];
		var img = document.createElement('img');
		img.setAttribute("src", data[i]["picture"]);
		cells[i][1].innerHTML = '';
		cells[i][1].appendChild(img);
		cells[i][2].innerHTML = data[i]["age"];
		cells[i][3].innerHTML = data[i]["phone"];
		cells[i][4].innerHTML = data[i]["friends"].length;
		cells[i][4].setAttribute("align", "center");
		cells[i][5].innerHTML = data[i]["tags"];
	}
}

function sortName() {
	sortAges = null;
	if (sortNames == null) {
		sortNames = true;
	} else {
		sortNames = !sortNames;
	}

	if (sortNames) {
		lastNameDec();
	} else {
		lastNameInc();
	}
}

function lastNameDec() {
	data.sort(lastNameDecSort);
	setEntries();
}

function lastNameDecSort(x, y) {
	if (x["name"]["last"] == y["name"]["last"]) {
		return 0;
	}
	if (x["name"]["last"] > y["name"]["last"]) {
		return 1;
	}
	if (x["name"]["last"] < y["name"]["last"]) {
		return -1;
	}
}

function lastNameInc() {
	data.sort(lastNameIncSort);
	setEntries();
}

function lastNameIncSort(x, y) {
	if (x["name"]["last"] == y["name"]["last"]) {
		return 0;
	}
	if (x["name"]["last"] > y["name"]["last"]) {
		return -1;
	}
	if (x["name"]["last"] < y["name"]["last"]) {
		return 1;
	}
}

function sortAge() {
	sortNames = null;
	if (sortAges == null) {
		sortAges = true;
	} else {
		sortAges = !sortAges;
	}

	if (sortAges) {
		ageInc();
	} else {
		ageDec();
	}
}

function ageDec() {
	data.sort(ageDecSort);
	setEntries();
}

function ageDecSort(x, y) {
	if (x["age"] == y["age"]) {
		return 0;
	}
	if (x["age"] > y["age"]) {
		return -1;
	}
	if (x["age"] < y["age"]) {
		return 1;
	}		
}

function ageInc() {
	data.sort(ageIncSort);
	setEntries();
}

function ageIncSort(x, y) {
	if (x["age"] == y["age"]) {
		return 0;
	}
	if (x["age"] > y["age"]) {
		return 1;
	}
	if (x["age"] < y["age"]) {
		return -1;
	}	
}